var storageVersion=9;var tenantId=window.location.pathname.split("/")[1];var currencyCode=localStorage.currencyCode||"UNKNOWN";var doHistoryUpdate=true;var isTest=false;var isClientTestData=false;var errors=[];var pageSize=25;var host=window.location.origin;var officeId=null;host=window.location.protocol+"//localhost:6789";var username=null;var authentication=null;var user=null;var currentTable="none";var loanClientsData=[];var eventtype=Object.freeze({CREATE:"create",UPDATE:"update",DELTE:"delete",UNCHANGED:"unchanged"});var clientList;var groupList;var officerList;var loanList;var savingsAccountList;var accountList;var shareList;var rolesList;var handlers;var shareProductList;if(checkTenantId(tenantId)){clientList=new ClientList();groupList=new GroupList();officerList=new OfficerList();loanList=new LoanList();savingsAccountList=new SavingsAccountList();accountList=new AccountList();shareList=new ShareList();rolesList=new RolesList();shareProductList=new ShareProductList();if(tenantId==="repotE"){handlers={Reporting:new ReportingHandler()}}else{handlers={Roles:new RolesHandler(),Permissions:new PermissionHandler(),Menu:new MenuHandler(),Loan:new LoanHandler(),SavingsAccount:new SavingsAccountHandler(),Client:new ClientHandler(),Group:new GroupHandler(),Communication:new CommunicationHandler(),Reporting:new ReportingHandler(),Accounting:new AccountingHandler(),Options:new Options(),Management:new ManagementHandler(),ActionRequired:new ActionRequiredHandler(),Dashboard:new DashboardHandler(),Share:new ShareHandler(),Settings:new SettingsHandler,Offices:new OfficeHandler,Countries:new CountryHandler,templates:new TemplatesHandler,Products:new ProductsHandler}}}var tenant={name:"awamo MFI ltd.",manager:{id:8,username:"cockpituser1",firstname:"Dirk",lastname:"Podolak",fullname:"Podolak, Dirk",phone1:"+49-123-4567890",email:"podolak@awamo.com"}};var BIT_MASK_DAY=1;var BIT_MASK_WEEK=2;var BIT_MASK_MONTH=4;var BIT_MASK_YEAR=8;function getAuthenticationHeader(){return{tenantId:tenantId,authentication:authentication,officeId:officeId}}function scrollToTop(){$("html, body").animate({scrollTop:0},"fast")}function ajax(b,c,a,d,h,f,e){if(typeof(h)==="undefined"){h=getAuthenticationHeader()}if(typeof(f)==="undefined"){f=function(i){}}if(typeof(e)==="undefined"){e=function(j,k,i){}}var g=$.ajax({url:host+b,type:c,data:d,headers:h,dataType:"json",contentType:"application/json; charset=utf-8",timeout:120000}).done(function(j,k,i){a(j,k,i)}).fail(function(j,k,i){f(j,k,i)}).always(function(j,k,i){e(j,k,i)});return g}function ajaxLocal(b,c,a,d,h,f,e){if(typeof(h)==="undefined"){h=getAuthenticationHeader()}if(typeof(f)==="undefined"){f=function(i){}}if(typeof(e)==="undefined"){e=function(j,k,i){}}var g=$.ajax({url:b,type:c,data:d,headers:h,dataType:"json",contentType:"application/json; charset=utf-8",timeout:120000}).done(function(j,k,i){a(j,k,i)}).fail(function(j,k,i){f(j,k,i)}).always(function(j,k,i){e(j,k,i)});return g}function ajaxAbstract(b,c,a,d,h,f,e){if(typeof(h)==="undefined"){h=getAuthenticationHeader()}if(typeof(f)==="undefined"){f=function(i){console.log("fail");console.log(i)}}if(typeof(e)==="undefined"){e=function(j,k,i){}}var g=$.ajax({url:host+b,type:c,data:d,headers:h,dataType:"json",contentType:"application/json; charset=utf-8",timeout:120000}).done(function(j,k,i){a(j,k,i)}).fail(function(j,k,i){f(j,k,i)}).always(function(j,k,i){e(j,k,i)});return g}function ajax2(b,c,a,d,h,f,e){if(typeof(h)==="undefined"){h=getAuthenticationHeader()}if(typeof(f)==="undefined"){f=function(i){console.log("fail");console.log(i);hideLoader()}}if(typeof(e)==="undefined"){e=function(j,k,i){console.log("always callback not implemented for this request")}}console.log("url : http://localhost:9090"+b);console.log("body");console.log(d);var g=$.ajax({url:"http://localhost:9090"+b,type:c,data:d,headers:h,dataType:"json",contentType:"application/json; charset=utf-8"}).done(function(j,k,i){a(j,k,i)}).fail(function(j,k,i){f(j,k,i)}).always(function(j,k,i){e(j,k,i)});return g}function initApp(){window.onpopstate=function(a){if(a.state!==null){doHistoryUpdate=false;$(a.state.selector).click()}};String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)};if(!String.prototype.startsWith){String.prototype.startsWith=function(b,a){a=a||0;return this.substr(a,b.length)===b}}if(!String.prototype.endsWith){String.prototype.endsWith=function(c,b){var a=this.toString();if(typeof b!=="number"||!isFinite(b)||Math.floor(b)!==b||b>a.length){b=a.length}b-=c.length;var d=a.indexOf(c,b);return d!==-1&&d===b}}if(!Array.prototype.includes){Array.prototype.includes=function(d){var e=Object(this);var a=parseInt(e.length)||0;if(a===0){return false}var f=parseInt(arguments[1])||0;var b;if(f>=0){b=f}else{b=a+f;if(b<0){b=0}}var c;while(b<a){c=e[b];if(d===c||(d!==d&&c!==c)){return true}b++}return false}}if(!Array.prototype.remove){Array.prototype.remove=function(b){var a=this.indexOf(b);if(a>=0){return this.splice(a,1)}return false}}if(!Array.prototype.isArray){Array.prototype.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"}}if(!Array.prototype.sum){Array.prototype.sum=function(){for(var b=0,a=this.length;a--;b+=this[a]){}return b}}if(!String.prototype.replaceAll){String.prototype.replaceAll=function(a,c){var d=this;var b=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return d.replace(new RegExp(b,"g"),c)}}}function initLocalStorage(){if(typeof(Storage)!=="undefined"){var a=localStorage.getItem("storageVersion");if(!exists(a)||a<storageVersion){localStorage.clear();localStorage.setItem("storageVersion",storageVersion)}}else{}}function initLogin(){if(!host.startsWith("http://localhost")&&isTest){}$("#loginForm").submit(handlers.Communication.loginFormSubmitHandler);$(".forgotPasswordLink a").on("click touch",function(){$("#actionValue").val("forgotPassword");$("#loginRow input").removeAttr("required");$("#forgotPasswordRow input").attr("required","required");$("#loginRow").hide();$("#forgotPasswordRow").show();$("#updatePasswordRow input").removeAttr("required");$("#updatePasswordRow").hide();$("#forgotPasswordData").val("");$(".message").hide()});$(".backToLoginLink a").on("click touch",function(){$("#actionValue").val("login");$("#loginRow input").attr("required","required");$("#forgotPasswordRow input").removeAttr("required");$("#updatePasswordRow input").removeAttr("required");$("#loginRow").show();$("#forgotPasswordRow").hide();$("#updatePasswordRow").hide();$(".message").hide()});statusbar("waiting for user login")}$(document).ready(function(){$("#syncNow").tooltip({placement:"bottom"});$(".addonToolTip").tooltip({placement:"bottom"});if(checkTenantId(tenantId)&&tenantId!=="repotE"){$(".viewContentContainer").mCustomScrollbar({scrollButtons:{enable:true},theme:"my-theme",axis:"yx"})}$(".showtooltip").tooltip({placement:"bottom"});$(".customSubmitButton").tooltip({placement:"top"});$(".customCancelButton").tooltip({placement:"top"});$(".tableSearchField").tooltip({placement:"bottom"});initApp();initLocalStorage();if(checkTenantId(tenantId)&&tenantId!=="repotE"){initLogin()}$("#login").show()});