"use strict";var LoanList=function(){AbstractList.call(this);this.rootPath="/loan/v1d/";this.alternativeGetAllLoansUrl="/loan/v1d/allLoans";this.defaultPageSize=250;this.entityName="loan";this.storagePrefix=this.entityName+"_"};LoanList.prototype=Object.create(AbstractList.prototype,{constructor:LoanList,sorter:{value:function(b,a){return b.loanId>a.loanId},enumerable:true},addTransactions:{value:function(b,d,e,c){var a=exists(d.transactionList)&&d.transactionList.length>0?d.transactionList[d.transactionList.length-1].transactionId:0;if(exists(d.transactionList)){d.transactionList=d.transactionList;AbstractList.prototype.put.call(this,b,d,e,c)}else{ajax(this.rootPath+d.loanId+"/transactions/"+a,"GET",function(f){(function(h,g){if(exists(g)){h.transactionList=g;AbstractList.prototype.put.call(this,b,h,e,c)}else{}})(d,f)})}},enumerable:true},addRepaymentSchedule:{value:function(c,f,g,e){if(exists(f.repaymentSchedule)){var b=f.repaymentSchedule;var a=b.rows.length;for(var d=a;d>0;d--){b.rows[d]=b.rows[d-1];b.rows[d].amortization=b.rows[d].due-b.rows[d].interest}b.rows[0]={dueDate:-1,paidDate:-1,balance:f.principal,due:-1,paid:-1,outstanding:-1,interest:-1,amortization:-1};f.repaymentSchedule=b;c.addTransactions(c,f,g,e)}else{ajax(this.rootPath+f.loanId+"/repaymentSchedule","GET",function(h){(function(m,k){if(exists(k)){var j=k.rows.length;for(var l=j;l>0;l--){k.rows[l]=k.rows[l-1];k.rows[l].amortization=k.rows[l].due-k.rows[l].interest}k.rows[0]={dueDate:-1,paidDate:-1,balance:m.principal,due:-1,paid:-1,outstanding:-1,interest:-1,amortization:-1};m.repaymentSchedule=k;c.addTransactions(c,m,g,e)}else{}})(f,h)})}},enumerable:true},addResponsibleLoanOfficer:{value:function(a,c,d,b){if("GROUP"===c.loanType){officerList.get(c.loanOfficer,function(e){(function(g,f){if(exists(f)){g.officer=f;a.addRepaymentSchedule(a,g,d,b)}})(c,e)})}},enumerable:true},addOwner:{value:function(a,c,d,b){if("INDIVIDUAL"===c.loanType){clientList.get(c.awamoId,function(e){(function(g,f){if(exists(f)){g.client=f;g.ownerName=f.fullname;a.addRepaymentSchedule(a,g,d,b)}})(c,e)})}else{if("GROUP"===c.loanType){groupList.get(c.awamoId,function(e){(function(g,f){if(exists(f)){g.group=f;g.ownerName=f.name;a.addResponsibleLoanOfficer(a,g,d,b)}})(c,e)})}}},enumerable:true},put:{value:function(b,a,d,c){if(b.entityName==="loan"){ActionRequiredHandler.prototype._dataModelChanged();if(exists(a)){}}this.addOwner(b,a,d,c)},enumerable:true},getListByStatus:{value:function(a){return this.getEntities().filter(function(b){return b.status===a})},enumerable:true},getCountByStatus:{value:function(a){return this.getEntities().reduce(function(b,c){if(c.status===a){b=b+1}return b},0)},enumerable:true},clientFilter:{value:function(a){return function(b){return b.awamoId===a}},enumerable:true},getByClient:{value:function(a){return this.entityArray.filter(this.clientFilter(a))},enumerable:true},getSubmittedCount:{value:function(){return this.getCountByStatus("SUBMITTED")},enumerable:true},getSubmittedLoanList:{value:function(){return this.getListByStatus("SUBMITTED")},enumerable:true},getApprovedLoanList:{value:function(){var a=this.getListByStatus("APPROVED");var b=this.getListByStatus("APPROVED_WITH_MODIFICATIONS");return a.concat(b)},enumerable:true},getApprovedWithModificationsLoanList:{value:function(){var a=this.getListByStatus("APPROVED_WITH_MODIFICATIONS");return a},enumerable:true},getRejectedCount:{value:function(){return this.getCountByStatus("REJECTED")},enumerable:true},getRejectedLoanList:{value:function(){return this.getListByStatus("REJECTED")},enumerable:true},getActiveCount:{value:function(){return this.getCountByStatus("ACTIVE")},enumerable:true},getApprovedCount:{value:function(){var b=this.getCountByStatus("APPROVED");var c=this.getCountByStatus("APPROVED_WITH_MODIFICATIONS");var a=parseInt(b)+parseInt(c);return a},enumerable:true},getActiveLoanList:{value:function(){return this.getListByStatus("ACTIVE")},enumerable:true},getContractSignedCount:{value:function(){return this.getCountByStatus("CONTRACT_SIGNED")},enumerable:true},getContractSignedLoanList:{value:function(){return this.getListByStatus("CONTRACT_SIGNED")},enumerable:true},getDisburesmentAllowedCount:{value:function(){return this.getCountByStatus("AWAITING_DISBURSEMENT")},enumerable:true},getDisburesmentAllowedList:{value:function(){return this.getListByStatus("AWAITING_DISBURSEMENT")},enumerable:true},getLoanIds:{value:function(){return this.mainIds},enumerable:true},enrich:{value:function(a){a.mainId=a.loanId;return a},enumerable:true}});