
"use strict";function BalanceSheet(){this.root=new Node();this.root.addChild(new Node({glCode:"1000",name:"Assets"}));this.root.addChild(new Node({glCode:"2000",name:"Liabilities"}));this.root.addChild(new Node({glCode:"3000",name:"Equity"}));this.root.addChild(new Node({glCode:"4000",name:"Revenues"}));this.root.addChild(new Node({glCode:"5000",name:"Expenses"}))}BalanceSheet.prototype={root:null,constructor:BalanceSheet,addAccount:function(b){var c;if(b.glCode%100===0&&b.glCode%1000!==0){c=Math.floor(b.glCode/1000)*1000}else{c=Math.floor(b.glCode/100)*100}var a=this.root.getChildByGLCode(c.toString());if(a===null){console.log("no parent found for "+b.glCode);return}a.addChild(new Node(b))}};function Node(a){this.account=a;this.children=[]}Node.prototype={parent:null,account:null,children:null,constructor:Node,balance:function(){if(this.children.length===0){return this.sumOfJournal(this.account)}var a=this.children.reduce(function(b,c){b+=c.balance();return b},0);return a},sumOfJournal:function(a){if(!exists(a)||!exists(a.journal)){return 0}return a.journal.reduce(function(c,b){if(b.entryType==="CREDIT"){return c+b.value}else{if(b.entryType==="DEBIT"){return c-b.value}else{return c}}},0)},addChild:function(a){a.parent=this;this.children.push(a)},getChildByGLCode:function(b){if(exists(this.account)&&this.account.glCode===b){return this}var a=this.children.length;for(var c=0;c<a;c++){if(this.children[c].account.glCode===b){return this.children[c]}}for(var c=0;c<a;c++){var d=this.children[c].getChildByGLCode(b);if(d!==null){return d}}return null}};