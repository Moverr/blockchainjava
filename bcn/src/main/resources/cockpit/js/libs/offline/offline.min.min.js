/*! offline-js 0.7.13 */
(function(){var i,h,n,m,l,k,j;m=function(p,o){var u,t,s,r;s=[];for(t in o.prototype){try{r=o.prototype[t],null==p[t]&&"function"!=typeof r?s.push(p[t]=r):s.push(void 0)}catch(q){u=q}}return s},i={},null==i.options&&(i.options={}),n={checks:{xhr:{url:function(){return"/favicon.ico?_="+Math.floor(1000000000*Math.random())},timeout:5000},image:{url:function(){return"/favicon.ico?_="+Math.floor(1000000000*Math.random())}},active:"xhr"},checkOnLoad:!1,interceptRequests:!0,reconnect:!0},l=function(p,o){var v,u,t,s,r,q;for(v=p,q=o.split("."),u=t=0,s=q.length;s>t&&(r=q[u],v=v[r],"object"==typeof v);u=++t){}return u===q.length-1?v:void 0},i.getOption=function(a){var e,c;return c=null!=(e=l(i.options,a))?e:l(n,a),"function"==typeof c?c():c},"function"==typeof window.addEventListener&&window.addEventListener("online",function(){return setTimeout(i.confirmUp,100)},!1),"function"==typeof window.addEventListener&&window.addEventListener("offline",function(){return i.confirmDown()},!1),i.state="up",i.markUp=function(){return i.trigger("confirmed-up"),"up"!==i.state?(i.state="up",i.trigger("up")):void 0},i.markDown=function(){return i.trigger("confirmed-down"),"down"!==i.state?(i.state="down",i.trigger("down")):void 0},k={},i.on=function(a,t,s){var r,q,p,o,f;if(q=a.split(" "),q.length>1){for(f=[],p=0,o=q.length;o>p;p++){r=q[p],f.push(i.on(r,t,s))}return f}return null==k[a]&&(k[a]=[]),k[a].push([s,t])},i.off=function(o,f){var t,s,r,q,p;if(null!=k[o]){if(f){for(r=0,p=[];r<k[o].length;){q=k[o][r],s=q[0],t=q[1],t===f?p.push(k[o].splice(r,1)):p.push(r++)}return p}return k[o]=[]}},i.trigger=function(o){var f,u,t,s,r,q,p;if(null!=k[o]){for(r=k[o],p=[],t=0,s=r.length;s>t;t++){q=r[t],f=q[0],u=q[1],p.push(u.call(f))}return p}},h=function(p,o,v){var u,t,s,r,q;return q=function(){return p.status&&p.status<12000?o():v()},null===p.onprogress?(u=p.onerror,p.onerror=function(){return v(),"function"==typeof u?u.apply(null,arguments):void 0},r=p.ontimeout,p.ontimeout=function(){return v(),"function"==typeof r?r.apply(null,arguments):void 0},t=p.onload,p.onload=function(){return q(),"function"==typeof t?t.apply(null,arguments):void 0}):(s=p.onreadystatechange,p.onreadystatechange=function(){return 4===p.readyState?q():0===p.readyState&&v(),"function"==typeof s?s.apply(null,arguments):void 0})},i.checks={},i.checks.xhr=function(){var f,b;b=new XMLHttpRequest,b.offline=!1,b.open("HEAD",i.getOption("checks.xhr.url"),!0),null!=b.timeout&&(b.timeout=i.getOption("checks.xhr.timeout")),h(b,i.markUp,i.markDown);try{b.send()}catch(a){f=a,i.markDown()}return b},i.checks.image=function(){var a;return a=document.createElement("img"),a.onerror=i.markDown,a.onload=i.markUp,void (a.src=i.getOption("checks.image.url"))},i.checks.down=i.markDown,i.checks.up=i.markUp,i.check=function(){return i.trigger("checking"),i.checks[i.getOption("checks.active")]()},i.confirmUp=i.confirmDown=i.check,i.onXHR=function(f){var d,o,g;return g=function(a,p){var e;return e=a.open,a.open=function(s,r,q,c,b){return f({type:s,url:r,async:q,flags:p,user:c,password:b,xhr:a}),e.apply(a,arguments)}},o=window.XMLHttpRequest,window.XMLHttpRequest=function(e){var c,q,p;return p=new o(e),g(p,e),q=p.setRequestHeader,p.headers={},p.setRequestHeader=function(s,r){return p.headers[s]=r,q.call(p,s,r)},c=p.overrideMimeType,p.overrideMimeType=function(b){return p.mimeType=b,c.call(p,b)},p},m(window.XMLHttpRequest,o),null!=window.XDomainRequest?(d=window.XDomainRequest,window.XDomainRequest=function(){var b;return b=new d,g(b),b},m(window.XDomainRequest,d)):void 0},j=function(){return i.getOption("interceptRequests")&&i.onXHR(function(b){var a;return a=b.xhr,a.offline!==!1?h(a,i.markUp,i.confirmDown):void 0}),i.getOption("checkOnLoad")?i.check():void 0},setTimeout(j,0),window.Offline=i}).call(this),function(){var r,q,p,o,n,m,l,k,j;if(!window.Offline){throw new Error("Offline Reconnect brought in without offline.js")}o=Offline.reconnect={},m=null,n=function(){var b;return null!=o.state&&"inactive"!==o.state&&Offline.trigger("reconnect:stopped"),o.state="inactive",o.remaining=o.delay=null!=(b=Offline.getOption("reconnect.initialDelay"))?b:3},q=function(){var d,c;return d=null!=(c=Offline.getOption("reconnect.delay"))?c:Math.min(Math.ceil(1.5*o.delay),3600),o.remaining=o.delay=d},l=function(){return"connecting"!==o.state?(o.remaining-=1,Offline.trigger("reconnect:tick"),0===o.remaining?k():void 0):void 0},k=function(){return"waiting"===o.state?(Offline.trigger("reconnect:connecting"),o.state="connecting",Offline.check()):void 0},r=function(){return Offline.getOption("reconnect")?(n(),o.state="waiting",Offline.trigger("reconnect:started"),m=setInterval(l,1000)):void 0},j=function(){return null!=m&&clearInterval(m),n()},p=function(){return Offline.getOption("reconnect")&&"connecting"===o.state?(Offline.trigger("reconnect:failure"),o.state="waiting",q()):void 0},o.tryNow=k,n(),Offline.on("down",r),Offline.on("confirmed-down",p),Offline.on("up",j)}.call(this),function(){var h,g,l,k,j,i;if(!window.Offline){throw new Error("Requests module brought in without offline.js")}l=[],i=!1,k=function(b){return Offline.trigger("requests:capture"),"down"!==Offline.state&&(i=!0),l.push(b)},j=function(v){var u,t,s,r,q,p,o,n,m;m=v.xhr,p=v.url,q=v.type,o=v.user,s=v.password,u=v.body,m.abort(),m.open(q,p,!0,o,s),r=m.headers;for(t in r){n=r[t],m.setRequestHeader(t,n)}return m.mimeType&&m.overrideMimeType(m.mimeType),m.send(u)},h=function(){return l=[]},g=function(){var a,o,n,m,e,c;for(Offline.trigger("requests:flush"),e={},a=0,n=l.length;n>a;a++){m=l[a],c=m.url.replace(/(\?|&)_=[0-9]+/,function(f,d){return"?"===d?d:""}),e[m.type.toUpperCase()+" - "+c]=m}for(o in e){m=e[o],j(m)}return h()},setTimeout(function(){return Offline.getOption("requests")!==!1?(Offline.on("confirmed-up",function(){return i?(i=!1,h()):void 0}),Offline.on("up",g),Offline.on("down",function(){return i=!1}),Offline.onXHR(function(m){var d,q,p,o,n;return n=m.xhr,p=m.async,n.offline!==!1&&(o=function(){return k(m)},q=n.send,n.send=function(a){return m.body=a,q.apply(n,arguments)},p)?null===n.onprogress?(n.addEventListener("error",o,!1),n.addEventListener("timeout",o,!1)):(d=n.onreadystatechange,n.onreadystatechange=function(){return 0===n.readyState?o():4===n.readyState&&(0===n.status||n.status>=12000)&&o(),"function"==typeof d?d.apply(null,arguments):void 0}):void 0}),Offline.requests={flush:g,clear:h}):void 0},0)}.call(this),function(){var g,f,j,i,h;if(!Offline){throw new Error("Offline simulate brought in without offline.js")}for(i=["up","down"],f=0,j=i.length;j>f;f++){h=i[f],(document.querySelector("script[data-simulate='"+h+"']")||localStorage.OFFLINE_SIMULATE===h)&&(null==Offline.options&&(Offline.options={}),null==(g=Offline.options).checks&&(g.checks={}),Offline.options.checks.active=h)}}.call(this),function(){var z,y,x,w,v,u,t,s,r,q,p,o,n;if(!window.Offline){throw new Error("Offline UI brought in without offline.js")}y='<div class="offline-ui"><div class="offline-ui-content"></div></div>',z='<a href class="offline-ui-retry"></a>',u=function(d){var c;return c=document.createElement("div"),c.innerHTML=d,c.children[0]},t=v=null,w=function(b){return p(b),t.className+=" "+b},p=function(b){return t.className=t.className.replace(new RegExp("(^| )"+b.split(" ").join("|")+"( |$)","gi")," ")},r={},s=function(d,c){return w(d),null!=r[d]&&clearTimeout(r[d]),r[d]=setTimeout(function(){return p(d),delete r[d]},1000*c)},n=function(g){var f,j,i,h;i={day:86400,hour:3600,minute:60,second:1};for(j in i){if(f=i[j],g>=f){return h=Math.floor(g/f),[h,j]}}return["now",""]},o=function(){var b,a;return t=u(y),document.body.appendChild(t),null!=Offline.reconnect&&Offline.getOption("reconnect")&&(t.appendChild(u(z)),b=t.querySelector(".offline-ui-retry"),a=function(c){return c.preventDefault(),Offline.reconnect.tryNow()},null!=b.addEventListener?b.addEventListener("click",a,!1):b.attachEvent("click",a)),w("offline-ui-"+Offline.state),v=t.querySelector(".offline-ui-content")},q=function(){return o(),Offline.on("up",function(){return p("offline-ui-down"),w("offline-ui-up"),s("offline-ui-up-2s",2),s("offline-ui-up-5s",5)}),Offline.on("down",function(){return p("offline-ui-up"),w("offline-ui-down"),s("offline-ui-down-2s",2),s("offline-ui-down-5s",5)}),Offline.on("reconnect:connecting",function(){return w("offline-ui-connecting"),p("offline-ui-waiting")}),Offline.on("reconnect:tick",function(){var e,d,f;return w("offline-ui-waiting"),p("offline-ui-connecting"),e=n(Offline.reconnect.remaining),d=e[0],f=e[1],v.setAttribute("data-retry-in-value",d),v.setAttribute("data-retry-in-unit",f)}),Offline.on("reconnect:stopped",function(){return p("offline-ui-connecting offline-ui-waiting"),v.setAttribute("data-retry-in-value",null),v.setAttribute("data-retry-in-unit",null)}),Offline.on("reconnect:failure",function(){return s("offline-ui-reconnect-failed-2s",2),s("offline-ui-reconnect-failed-5s",5)}),Offline.on("reconnect:success",function(){return s("offline-ui-reconnect-succeeded-2s",2),s("offline-ui-reconnect-succeeded-5s",5)})},"complete"===document.readyState?q():null!=document.addEventListener?document.addEventListener("DOMContentLoaded",q,!1):(x=document.onreadystatechange,document.onreadystatechange=function(){return"complete"===document.readyState&&q(),"function"==typeof x?x.apply(null,arguments):void 0})}.call(this);